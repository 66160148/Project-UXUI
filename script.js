const monthNames = [
    "January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December"
];

let currentDate = new Date(2025, 1); 

function renderCalendar(date) {
    const calendarElement = document.getElementById("calendar");
    const monthYearElement = document.getElementById("monthYear"); // ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á <h2>

    // ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏µ
    monthYearElement.textContent = `${monthNames[date.getMonth()]} ${date.getFullYear()}`;

    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
    const firstDay = new Date(date.getFullYear(), date.getMonth(), 1);
    const lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0);
    const daysInMonth = lastDay.getDate();
    const startDay = firstDay.getDay();

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô
    let table = "<table><tr>";
    const weekDays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
    for (let day of weekDays) {
        table += `<th>${day}</th>`;
    }
    table += "</tr><tr>";

    // ‡πÄ‡∏ï‡∏¥‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1
    for (let i = 0; i < startDay; i++) {
        table += "<td></td>";
    }

    // ‡πÄ‡∏ï‡∏¥‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á
    for (let day = 1; day <= daysInMonth; day++) {
        if ((startDay + day - 1) % 7 === 0 && day !== 1) {
            table += "</tr><tr>";
        }
        table += `<td>${day}</td>`;
    }
    table += "</tr></table>";

    calendarElement.innerHTML = table;
}

function previousMonth() {
    currentDate.setMonth(currentDate.getMonth() - 1);
    renderCalendar(currentDate);
}

function nextMonth() {
    currentDate.setMonth(currentDate.getMonth() + 1);
    renderCalendar(currentDate);
}

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô
document.addEventListener("DOMContentLoaded", () => {
    renderCalendar(currentDate);
});

function goToLogin() {
    window.location.href = "login.html";
  }

  // ‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡πá‡∏≠‡∏õ‡∏≠‡∏±‡∏õ
function openPopup() {
    document.getElementById("loginPopup").style.display = "flex";
}

// ‡∏õ‡∏¥‡∏î‡∏õ‡πá‡∏≠‡∏õ‡∏≠‡∏±‡∏õ
function closePopup() {
    document.getElementById("loginPopup").style.display = "none";
}

// ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
function togglePassword() {
  let passwordInput = document.getElementById("password");
  let toggleButton = document.querySelector(".toggle-password");

  if (passwordInput.type === "password") {
      passwordInput.type = "text";
      toggleButton.innerHTML = "üôà"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏õ‡∏¥‡∏î‡∏ï‡∏≤
  } else {
      passwordInput.type = "password";
      toggleButton.innerHTML = "üëÅ"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏≤
  }
}


function goBack() {
  window.history.back();
}

function openSettings() {
  alert("‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤");
}

function changeProfilePic() {
  alert("‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå");
}

function editName() {
  let newName = prompt("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà:", document.getElementById("name").innerText);
  if (newName) document.getElementById("name").innerText = newName;
}

function editPhone() {
  let newPhone = prompt("‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡πÉ‡∏´‡∏°‡πà:", document.getElementById("phone").innerText);
  if (newPhone) document.getElementById("phone").innerText = newPhone;
}

function toggleAccordion(btn) {
  let panel = btn.nextElementSibling;
  panel.style.display = panel.style.display === "block" ? "none" : "block";
}

function deleteTrip(btn) {
  if (confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
    btn.parentElement.remove();
  }
}

function changePassword() {
  alert("‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô");
}

function confirmDeleteAccount() {
  if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ?")) {
    alert("‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß");
  }
}

function logout() {
  alert("‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö");
}

document.getElementById("loginForm").addEventListener("submit", function(event) {
  event.preventDefault(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
  
  let username = document.getElementById("username").value;
  let password = document.getElementById("password").value;
  
  // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö username ‡πÅ‡∏•‡∏∞ password
  if (username === "SmileZ" && password === "1234") {
      window.location.href = "home2.html"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
  } else {
      alert("‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
  }
});

document.addEventListener("DOMContentLoaded", function () {
  const calendar = document.getElementById("calendar");
  const selectAvailability = document.getElementById("availability");

  // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
  const months = [
      { name: "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°", days: 31 },
      { name: "‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå", days: 28 },
      { name: "‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°", days: 31 },
      { name: "‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô", days: 30 },
      { name: "‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°", days: 31 },
      { name: "‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô", days: 30 },
      { name: "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°", days: 31 },
      { name: "‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°", days: 31 },
      { name: "‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô", days: 30 },
      { name: "‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°", days: 31 },
      { name: "‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô", days: 30 },
      { name: "‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°", days: 31 }
  ];

  function populateDateOptions() {
      selectAvailability.innerHTML = ""; // ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô

      months.forEach((month, monthIndex) => {
          for (let i = 1; i <= month.days; i++) {
              let option = document.createElement("option");
              option.value = `${i}-${monthIndex + 1}`; // ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà-‡πÄ‡∏î‡∏∑‡∏≠‡∏ô"
              option.textContent = `${i} ${month.name}`;
              selectAvailability.appendChild(option);
          }
      });
  }

  populateDateOptions(); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤

  // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≤‡∏Å select
  selectAvailability.addEventListener("change", function () {
      let selectedValue = selectAvailability.value.split("-");
      let selectedDate = parseInt(selectedValue[0]); // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
      let selectedMonth = parseInt(selectedValue[1]); // ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (1-12)

      let days = calendar.getElementsByTagName("td");

      // ‡∏•‡∏ö‡∏£‡∏π‡∏õ‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
      for (let day of days) {
          if (parseInt(day.innerText) === selectedDate) {
              let existingImg = day.querySelector("img");
              if (existingImg) {
                  existingImg.remove();
              }

              // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
              let userImg = document.createElement("img");
              userImg.src = "image/1-4.jpg";
              userImg.alt = "User";
              userImg.classList.add("calendar-avatar");
              day.appendChild(userImg);
              break;
          }
      }
  });
});

document.addEventListener("DOMContentLoaded", function () {
  const selectAvailability = document.getElementById("availability");

  function populateDateOptions() {
      selectAvailability.innerHTML = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà

      for (let month = 1; month <= 12; month++) {
          for (let day = 1; day <= 31; day++) {
              let option = document.createElement("option");
              option.value = `${day}-${month}`;
              option.textContent = `${day} / ${month}`;
              selectAvailability.appendChild(option);
          }
      }
  }

  populateDateOptions();
});
